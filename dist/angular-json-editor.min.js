// angular-json-editor v0.2.1
!function(a,b){"use strict";b.module("angular-json-editor",[]).provider("JSONEditor",function(){function a(c){return b.forEach(arguments,function(d){d!==c&&b.forEach(d,function(b,d){c[d]&&c[d].constructor&&c[d].constructor===Object?a(c[d],b):c[d]=b})}),c}var c={defaults:{options:{iconlib:"bootstrap3",theme:"bootstrap3"}}};this.configure=function(b){a(c,b)},this.$get=["$window",function(b){var d=b.JSONEditor;return a(d,c),b.JSONEditor}]}).directive("jsonEditor",["$q","JSONEditor",function(a,c){return{restrict:"E",transclude:!0,scope:{schema:"=",startval:"=",buttonsController:"@",onChange:"&"},controller:["$scope","$attrs","$controller",function(a,c,d){var e,f,g=c.buttonsController;if(b.isString(g)&&""!==g){f={$scope:a};try{e=d(g,f)}catch(h){throw new Error("angular-json-editor: buttons-controller attribute must be a valid controller.")}}}],link:function(d,e,f,g,h){var i=a.when({}),j=a.when(null);if(d.isValid=!1,!b.isString(f.schema))throw new Error("angular-json-editor: schema attribute has to be defined.");b.isObject(d.schema)&&(j=a.when(d.schema)),b.isObject(d.startval)&&(i=a.when(d.startval)),a.all([j,i]).then(function(a){function b(){var a=j;d.editor&&d.editor.destroy&&(a=d.editor.getValue(),d.editor.destroy()),d.editor=new c(e[0],{startval:a,schema:i},!0),d.editor.on("ready",f),d.editor.on("change",g),e.append(k)}function f(){d.isValid=0===d.editor.validate().length}function g(){"function"==typeof d.onChange&&d.onChange({$editorValue:d.editor.getValue()}),d.$apply(function(){d.isValid=0===d.editor.validate().length})}var i=a[0].data||a[0],j=a[1].data||a[1];if(null===i)throw new Error("angular-json-editor: could not resolve schema data.");b(j,i),d.$watch("schema",function(a,c){a.success?a.success(function(a){i=a}):i=a,b()},!0);var k=h(d,function(a){return a});e.append(k)})}}}])}(window,angular);